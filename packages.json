{
    "packageId": "207c8db1805856",
    "name": "parcels",
    "description": "parcel pickup and delivery",
    "buttons": [
        {
            "buttonId": "153f852dac4c0e",
            "name": "parcel delivery",
            "description": "parcel delivery",
            "type": "action",
            "questions": [
                {
                    "question": "who is the parcel for? (demo: 1001)",
                    "type": "user",
                    "values": {},
                    "validators": [],
                    "compulsory": true,
                    "questionId": "1dd9c8a178fd1",
                    "number": 1,
                    "batch": true
                },
                {
                    "question": "parcel type",
                    "type": "options",
                    "values": {
                        "options": [
                            "amazon",
                            "parcel",
                            "groceries",
                            "flowers",
                            "laundry",
                            "other",
                            "registered letter"
                        ],
                        "multiple": "single",
                        "none": false,
                        "description": "select the type of parcel"
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "102ed7e1ce2796",
                    "number": 2
                },
                {
                    "question": "parcel code",
                    "type": "serverfunction",
                    "values": {
                        "url": "/api/v1/unique",
                        "method": "POST",
                        "responseType": "text",
                        "description": "please write this code on the letter/package.  This code will be provided to you at pickup."
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "2391a50203f998",
                    "number": 3
                },
                {
                    "question": "where is it located",
                    "type": "options",
                    "values": {
                        "options": [
                            "sh1",
                            "sh2",
                            "sh3",
                            "sh4",
                            "sh5",
                            "f",
                            "safe"
                        ],
                        "multiple": "single",
                        "none": false,
                        "description": "please select where the parcel will be stored"
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "112aa046d29fb2",
                    "number": 4
                }
            ],
            "navigation": {
                "id": "1dd9c8a178fd1",
                "type": "node",
                "parent": null,
                "children": [
                    {
                        "id": "102ed7e1ce2796",
                        "type": "node",
                        "parent": "1dd9c8a178fd1",
                        "children": [
                            {
                                "id": "2391a50203f998",
                                "type": "node",
                                "parent": "102ed7e1ce2796",
                                "children": [
                                    {
                                        "id": "112aa046d29fb2",
                                        "type": "node",
                                        "parent": "2391a50203f998",
                                        "children": [
                                            {
                                                "id": "13ea095573d5f3",
                                                "type": "node",
                                                "parent": "112aa046d29fb2",
                                                "children": [
                                                    {
                                                        "id": "2a55cacbceab32",
                                                        "type": "node",
                                                        "parent": "13ea095573d5f3",
                                                        "children": [],
                                                        "rules": []
                                                    }
                                                ],
                                                "rules": []
                                            }
                                        ],
                                        "rules": []
                                    }
                                ],
                                "rules": []
                            }
                        ],
                        "rules": []
                    }
                ],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": [
                {
                    "name": "parcel deliveries",
                    "type": "log",
                    "url": "https://[buttonkit]/api/v1/datastore/log",
                    "method": "POST",
                    "contentType": "json",
                    "parameters": {
                        "dynamic": {
                            "presser": [
                                {
                                    "id": "13ea095573d5f3_presser",
                                    "type": "presser"
                                }
                            ],
                            "pressed": [
                                {
                                    "id": "13ea095573d5f3_pressed",
                                    "type": "pressed"
                                }
                            ]
                        },
                        "static": {
                            "_datastorename": "deliveries"
                        }
                    },
                    "webhookId": "13ea095573d5f3"
                },
                {
                    "name": "notify endpoint",
                    "type": "notify",
                    "url": "https://[buttonkit]/api/v1/send",
                    "method": "POST",
                    "parameters": {
                        "dynamic": {
                            "recipients": [
                                {
                                    "id": "1dd9c8a178fd1",
                                    "type": "question",
                                    "value": {}
                                }
                            ],
                            "placeholders": [
                                {
                                    "id": "1dd9c8a178fd1:username",
                                    "qid": "1dd9c8a178fd1",
                                    "key": "username",
                                    "type": "question"
                                },
                                {
                                    "id": "102ed7e1ce2796",
                                    "qid": "102ed7e1ce2796",
                                    "key": "value",
                                    "type": "question"
                                },
                                {
                                    "id": "2391a50203f998",
                                    "qid": "2391a50203f998",
                                    "key": "value",
                                    "type": "question"
                                },
                                {
                                    "id": "1dd9c8a178fd1:firstname",
                                    "qid": "1dd9c8a178fd1",
                                    "key": "firstname",
                                    "type": "question"
                                },
                                {
                                    "id": "1dd9c8a178fd1:surname",
                                    "qid": "1dd9c8a178fd1",
                                    "key": "surname",
                                    "type": "question"
                                }
                            ]
                        },
                        "static": {
                            "email": {
                                "subject": "New parcel",
                                "body": "Dear [1dd9c8a178fd1:firstname][1dd9c8a178fd1:surname].  You have a new parcel ([102ed7e1ce2796]).  Please come an pick it up at your earliest convenience ([2391a50203f998])"
                            },
                            "sms": {
                                "body": "Dear [1dd9c8a178fd1:username], you have a parcel ([102ed7e1ce2796]).  Please come and pick it up.  Code:[2391a50203f998]"
                            },
                            "message": {
                                "subject": "New parcel",
                                "body": "You have a new parcel [102ed7e1ce2796].  Pick it up with code: [2391a50203f998]"
                            },
                            "recipients": []
                        }
                    },
                    "webhookId": "2a55cacbceab32"
                }
            ]
        },
        {
            "buttonId": "21eb5186e198b",
            "name": "pickups",
            "description": "button description",
            "type": "action",
            "questions": [
                {
                    "question": "parcel pickups",
                    "type": "datastoreitem",
                    "values": {
                        "storeId": "deliveries",
                        "schema": [
                            {
                                "id": "1dd9c8a178fd1",
                                "path": "1dd9c8a178fd1",
                                "alias": "recipient"
                            },
                            {
                                "id": "102ed7e1ce2796",
                                "path": "102ed7e1ce2796",
                                "alias": "type"
                            },
                            {
                                "id": "2391a50203f998",
                                "path": "2391a50203f998",
                                "alias": "code"
                            },
                            {
                                "id": "112aa046d29fb2",
                                "path": "112aa046d29fb2",
                                "alias": "location"
                            }
                        ]
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "18c521ca016893",
                    "number": 1
                },
                {
                    "question": "please provide your signature",
                    "type": "signature",
                    "values": {},
                    "validators": [],
                    "compulsory": true,
                    "questionId": "13deb06d11deb3",
                    "number": 2
                },
                {
                    "question": "consent",
                    "type": "consent",
                    "values": {
                        "cid": "ebdc4cc5b933d",
                        "user": {
                            "type": "datastoreitem",
                            "id": "18c521ca016893",
                            "datastore": "deliveries",
                            "path": "1dd9c8a178fd1",
                            "name": "recipient"
                        },
                        "consenttext": "I understand and give my consent"
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "306be7f2b70f9",
                    "number": 3
                }
            ],
            "navigation": {
                "id": "18c521ca016893",
                "type": "node",
                "parent": null,
                "children": [
                    {
                        "id": "13deb06d11deb3",
                        "type": "node",
                        "parent": "18c521ca016893",
                        "children": [
                            {
                                "id": "cac4267a920ae8",
                                "type": "node",
                                "parent": "13deb06d11deb3",
                                "children": [
                                    {
                                        "id": "13baed5c9a3d3c",
                                        "type": "node",
                                        "parent": "cac4267a920ae8",
                                        "children": [],
                                        "rules": []
                                    }
                                ],
                                "rules": []
                            }
                        ],
                        "rules": [
                            {
                                "type": "question",
                                "id": "18c521ca016893",
                                "value": {
                                    "type": "consent",
                                    "values": {
                                        "cid": "ebdc4cc5b933d",
                                        "text": "<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>\n<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>",
                                        "type": "datastoreitem",
                                        "datastore": "deliveries",
                                        "path": "1dd9c8a178fd1",
                                        "consented": true
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "id": "306be7f2b70f9",
                        "type": "node",
                        "parent": "18c521ca016893",
                        "children": [
                            {
                                "id": "19a7854bbf856c",
                                "type": "subtree",
                                "parent": null,
                                "nodeid": "13deb06d11deb3",
                                "children": [],
                                "rules": []
                            }
                        ],
                        "rules": []
                    }
                ],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": [
                {
                    "name": "log endpoint",
                    "type": "log",
                    "url": "https://[buttonkit]/api/v1/datastore/log",
                    "method": "POST",
                    "contentType": "json",
                    "parameters": {
                        "dynamic": {
                            "presser": [
                                {
                                    "id": "cac4267a920ae8_presser",
                                    "type": "presser"
                                }
                            ],
                            "pressed": [
                                {
                                    "id": "cac4267a920ae8_pressed",
                                    "type": "pressed"
                                }
                            ]
                        },
                        "static": {
                            "_datastorename": "collected"
                        }
                    },
                    "webhookId": "cac4267a920ae8"
                },
                {
                    "name": "delete log item",
                    "type": "deletelogitem",
                    "url": "https://[buttonkit]/api/v1/datastore/delete/question",
                    "method": "POST",
                    "parameters": {
                        "dynamic": {
                            "ids": [
                                "18c521ca016893"
                            ]
                        },
                        "static": {
                            "questionId": "18c521ca016893"
                        }
                    },
                    "webhookId": "13baed5c9a3d3c"
                }
            ]
        },
        {
            "buttonId": "17dd55d0209cac",
            "name": "collected",
            "description": "all collected parcels",
            "type": "action",
            "questions": [
                {
                    "question": "collected parcels",
                    "type": "datastoreitem",
                    "values": {
                        "storeId": "collected",
                        "schema": [
                            {
                                "id": "13ea095573d5f3_pressed",
                                "path": "18c521ca016893,13ea095573d5f3_pressed",
                                "alias": "logged"
                            },
                            {
                                "id": "1dd9c8a178fd1",
                                "path": "18c521ca016893,1dd9c8a178fd1",
                                "alias": "recipient"
                            },
                            {
                                "id": "2391a50203f998",
                                "path": "18c521ca016893,2391a50203f998",
                                "alias": "code"
                            },
                            {
                                "id": "13deb06d11deb3",
                                "path": "13deb06d11deb3",
                                "alias": "signature"
                            }
                        ]
                    },
                    "validators": [],
                    "compulsory": false,
                    "questionId": "140f74d3f76f06",
                    "number": 1
                }
            ],
            "navigation": {
                "id": "140f74d3f76f06",
                "type": "node",
                "parent": null,
                "children": [],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": []
        },
        {
            "buttonId": "2e4da53e2fce12",
            "name": "my parcels",
            "description": "all my parcels",
            "type": "action",
            "questions": [
                {
                    "question": "my parcels",
                    "type": "datastoreitem",
                    "values": {
                        "storeId": "deliveries",
                        "schema": [
                            {
                                "id": "13ea095573d5f3_pressed",
                                "path": "13ea095573d5f3_pressed",
                                "alias": "received",
                                "default": ""
                            },
                            {
                                "id": "102ed7e1ce2796",
                                "path": "102ed7e1ce2796",
                                "alias": "parcel type",
                                "default": ""
                            },
                            {
                                "id": "2391a50203f998",
                                "path": "2391a50203f998",
                                "alias": "code",
                                "default": ""
                            }
                        ],
                        "filters": [
                            {
                                "type": "user",
                                "id": "1dd9c8a178fd1",
                                "path": "1dd9c8a178fd1"
                            }
                        ],
                        "limit": -1,
                        "orderby": "pressed",
                        "sortby": "asc"
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "14d83a600983ac",
                    "number": 1
                }
            ],
            "navigation": {
                "id": "14d83a600983ac",
                "type": "node",
                "parent": "22a796ac8ced7a",
                "children": [],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": []
        },
        {
            "buttonId": "187f72ea045667",
            "name": "presser consent",
            "description": "this is a presser consent test",
            "type": "action",
            "questions": [
                {
                    "question": "first options question",
                    "type": "options",
                    "values": {
                        "options": [
                            "yes",
                            "no"
                        ],
                        "multiple": "single",
                        "none": false,
                        "description": ""
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "14462d924421b",
                    "number": 1
                },
                {
                    "question": "consent",
                    "type": "consent",
                    "values": {
                        "cid": "2009c6ddc079e8",
                        "user": {
                            "name": "presser",
                            "id": "presser",
                            "type": "presser"
                        }
                    },
                    "validators": [],
                    "compulsory": false,
                    "questionId": "180a901bf4f019",
                    "number": 2
                },
                {
                    "question": "consented options",
                    "type": "options",
                    "values": {
                        "options": [
                            "yes",
                            "no"
                        ],
                        "multiple": "single",
                        "none": false,
                        "description": ""
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "2c9636260beccc",
                    "number": 3
                }
            ],
            "navigation": {
                "id": "14462d924421b",
                "type": "node",
                "parent": null,
                "children": [
                    {
                        "id": "180a901bf4f019",
                        "type": "node",
                        "parent": "14462d924421b",
                        "children": [],
                        "rules": []
                    },
                    {
                        "id": "2c9636260beccc",
                        "type": "node",
                        "parent": "14462d924421b",
                        "children": [],
                        "rules": [
                            {
                                "type": "consent",
                                "id": "consent",
                                "value": {
                                    "type": "consent",
                                    "values": {
                                        "cid": "2009c6ddc079e8",
                                        "text": "<p>You need to give your consent I am afraid!</p>",
                                        "type": "presser",
                                        "id": "presser"
                                    }
                                }
                            }
                        ]
                    }
                ],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": []
        },
        {
            "buttonId": "2cdea6f1a1c80a",
            "name": "chosen user consent",
            "description": "another test",
            "type": "action",
            "questions": [
                {
                    "question": "please choose a user",
                    "type": "user",
                    "values": {},
                    "validators": [],
                    "compulsory": true,
                    "questionId": "d0dc095a5f9538",
                    "number": 1
                },
                {
                    "question": "consent",
                    "type": "consent",
                    "values": {
                        "cid": "42a5f9ae6323cc",
                        "user": {
                            "type": "user",
                            "id": "d0dc095a5f9538",
                            "name": "please choose a user"
                        }
                    },
                    "validators": [],
                    "compulsory": false,
                    "questionId": "1816a5d0b51e98",
                    "number": 2
                },
                {
                    "question": "lovely consented!!",
                    "type": "freetext",
                    "values": {
                        "format": "medium",
                        "description": ""
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "23c358f4b2dace",
                    "number": 3
                }
            ],
            "navigation": {
                "id": "d0dc095a5f9538",
                "type": "node",
                "parent": null,
                "children": [
                    {
                        "id": "1816a5d0b51e98",
                        "type": "node",
                        "parent": "d0dc095a5f9538",
                        "children": [],
                        "rules": []
                    },
                    {
                        "id": "23c358f4b2dace",
                        "type": "node",
                        "parent": "d0dc095a5f9538",
                        "children": [],
                        "rules": [
                            {
                                "type": "question",
                                "id": "d0dc095a5f9538",
                                "value": {
                                    "type": "consent",
                                    "values": {
                                        "cid": "42a5f9ae6323cc",
                                        "text": "<p>This user needs to provide consent</p>",
                                        "type": "user",
                                        "id": "d0dc095a5f9538"
                                    }
                                }
                            }
                        ]
                    }
                ],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": []
        }
    ]
}