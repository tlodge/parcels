{
    "packageId": "144c44ff63350c",
    "name": "parcels",
    "description": "parcel pickup and delivery",
    "buttons": [
        {
            "buttonId": "153f852dac4c0e",
            "name": "parcel delivery",
            "description": "parcel delivery",
            "type": "action",
            "questions": [
                {
                    "question": "who is the parcel for (type '1' for demo user)",
                    "type": "user",
                    "values": {},
                    "validators": [],
                    "compulsory": true,
                    "questionId": "1dd9c8a178fd1",
                    "number": 1,
                    "batch": true
                },
                {
                    "question": "parcel type",
                    "type": "options",
                    "values": {
                        "options": [
                            "amazon",
                            "parcel",
                            "groceries",
                            "flowers",
                            "laundry",
                            "other",
                            "registered letter"
                        ],
                        "multiple": "single",
                        "none": false,
                        "description": "select the type of parcel"
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "102ed7e1ce2796",
                    "number": 2
                },
                {
                    "question": "parcel code",
                    "type": "serverfunction",
                    "values": {
                        "url": "/api/v1/unique",
                        "method": "POST",
                        "responseType": "text",
                        "description": "please write this code on the letter/package.  This code will be provided to you at pickup."
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "2391a50203f998",
                    "number": 3
                },
                {
                    "question": "where is it stored?",
                    "type": "options",
                    "values": {
                        "options": [
                            "normal",
                            "oversize"
                        ],
                        "multiple": "single",
                        "none": false,
                        "description": "please select where the parcel will be stored"
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "112aa046d29fb2",
                    "number": 4
                }
            ],
            "navigation": {
                "id": "1dd9c8a178fd1",
                "type": "node",
                "parent": null,
                "children": [
                    {
                        "id": "102ed7e1ce2796",
                        "type": "node",
                        "parent": "1dd9c8a178fd1",
                        "children": [
                            {
                                "id": "2391a50203f998",
                                "type": "node",
                                "parent": "102ed7e1ce2796",
                                "children": [
                                    {
                                        "id": "112aa046d29fb2",
                                        "type": "node",
                                        "parent": "2391a50203f998",
                                        "children": [
                                            {
                                                "id": "13ea095573d5f3",
                                                "type": "node",
                                                "parent": "112aa046d29fb2",
                                                "children": [
                                                    {
                                                        "id": "2ee63fe18d10d2",
                                                        "type": "node",
                                                        "parent": "13ea095573d5f3",
                                                        "children": [],
                                                        "rules": []
                                                    }
                                                ],
                                                "rules": []
                                            }
                                        ],
                                        "rules": []
                                    }
                                ],
                                "rules": []
                            }
                        ],
                        "rules": []
                    }
                ],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": [
                {
                    "name": "parcel deliveries",
                    "type": "log",
                    "url": "https://[buttonkit]/api/v1/datastore/log",
                    "method": "POST",
                    "contentType": "json",
                    "parameters": {
                        "dynamic": {
                            "presser": [
                                {
                                    "id": "13ea095573d5f3_presser",
                                    "type": "presser"
                                }
                            ],
                            "pressed": [
                                {
                                    "id": "13ea095573d5f3_pressed",
                                    "type": "pressed"
                                }
                            ]
                        },
                        "static": {
                            "_datastorename": "deliveries"
                        }
                    },
                    "webhookId": "13ea095573d5f3"
                },
                {
                    "name": "notify endpoint",
                    "type": "notify",
                    "url": "https://[buttonkit]/api/v1/send",
                    "method": "POST",
                    "parameters": {
                        "dynamic": {
                            "recipients": [
                                {
                                    "id": "1dd9c8a178fd1",
                                    "type": "question",
                                    "answer": {}
                                }
                            ],
                            "placeholders": [
                                {
                                    "id": "102ed7e1ce2796",
                                    "qid": "102ed7e1ce2796",
                                    "key": "value",
                                    "type": "question"
                                },
                                {
                                    "id": "2391a50203f998",
                                    "qid": "2391a50203f998",
                                    "key": "value",
                                    "type": "question"
                                }
                            ]
                        },
                        "static": {
                            "email": {
                                "subject": "you have a delivery",
                                "body": "Dear student,\n\nYou have a delivery ([102ed7e1ce2796]).  Please come and pick it up from reception, code: [2391a50203f998] "
                            },
                            "sms": {
                                "body": "Dear student, you have a delivery ([102ed7e1ce2796]).  Please come and pick it up from reception, code: [2391a50203f998]"
                            },
                            "message": {
                                "subject": "",
                                "body": ""
                            },
                            "recipients": []
                        }
                    },
                    "webhookId": "2ee63fe18d10d2"
                }
            ]
        },
        {
            "buttonId": "21eb5186e198b",
            "name": "pickups",
            "description": "button description",
            "type": "action",
            "questions": [
                {
                    "question": "parcel pickups",
                    "type": "datastoreitem",
                    "values": {
                        "storeId": "deliveries",
                        "schema": [
                            {
                                "id": "1dd9c8a178fd1",
                                "path": "1dd9c8a178fd1",
                                "alias": "recipient"
                            },
                            {
                                "id": "102ed7e1ce2796",
                                "path": "102ed7e1ce2796",
                                "alias": "type"
                            },
                            {
                                "id": "2391a50203f998",
                                "path": "2391a50203f998",
                                "alias": "code"
                            },
                            {
                                "id": "112aa046d29fb2",
                                "path": "112aa046d29fb2",
                                "alias": "location"
                            }
                        ],
                        "description": "This lists all of the parcels that are ready for collection.  Select the parcel(s) to be collected."
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "18c521ca016893",
                    "number": 1
                },
                {
                    "question": "please provide your signature",
                    "type": "signature",
                    "values": {},
                    "validators": [],
                    "compulsory": true,
                    "questionId": "13deb06d11deb3",
                    "number": 2
                },
                {
                    "question": "consent",
                    "type": "consent",
                    "values": {
                        "cid": "219b61ea011b42",
                        "user": {
                            "type": "datastoreitem",
                            "id": "18c521ca016893",
                            "datastore": "deliveries",
                            "path": "1dd9c8a178fd1",
                            "name": "recipient"
                        },
                        "consenttext": "I understand and give my consent"
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "306be7f2b70f9",
                    "number": 3
                }
            ],
            "navigation": {
                "id": "18c521ca016893",
                "type": "node",
                "parent": null,
                "children": [
                    {
                        "id": "13deb06d11deb3",
                        "type": "node",
                        "parent": "18c521ca016893",
                        "children": [
                            {
                                "id": "cac4267a920ae8",
                                "type": "node",
                                "parent": "13deb06d11deb3",
                                "children": [
                                    {
                                        "id": "287660c6b004cc",
                                        "type": "node",
                                        "parent": "cac4267a920ae8",
                                        "children": [
                                            {
                                                "id": "12eceb93a83535",
                                                "type": "node",
                                                "parent": "287660c6b004cc",
                                                "children": []
                                            }
                                        ]
                                    }
                                ],
                                "rules": []
                            }
                        ],
                        "rules": [
                            {
                                "type": "question",
                                "id": "18c521ca016893",
                                "value": {
                                    "type": "consent",
                                    "values": {
                                        "cid": "219b61ea011b42",
                                        "text": "<strong>To comply with EU GDPR regulations we require your explicit consent to use your personal data for our parcel management and messaging system.</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                             \n <div style=\"line-height:1.4em;\">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \n <div style=\"font-size:1.1em;font-weight:600;margin-top:14px;margin-bottom:10px;\">What personal is being recorded?</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \n We are using your <strong>name, UK address, email address, mobile phone number and digital signature.</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \n </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n <div style=\"font-size:1.1em;font-weight:600;margin-top:14px;margin-bottom:10px;\">How is it being used?</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n <div style=\"line-height:1.4em;\">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \n We use your <strong>name and address</strong> to look up who to notify when we receive a delivery on your behalf.  We use your <strong>mobile phone number and email address</strong> to notify you of delivery.   We use your <strong>signature</strong> to evidence delivery pickups against your name. We may also, from time to time, use your <strong>mobile phone number and email address</strong> to contact you directly if we need to get in touch. We may generate anonymized aggregate statistics on parcel deliveries and pickups in order to assess staffing levels and predict busy periods.\n </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n <div style=\"font-size:1.1em;font-weight:600;margin-top:14px;margin-bottom:10px;\">Who else has access to this data?</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   \n <div style=\"line-height:1.4em;\">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \n On-site staff and Kaplan management have access to the system, so will be able to access to this data as part of the day-to-day operation.  System administrators will also have access to your information, though only as a necessary part of managing the system.  <strong>We DO NOT share your details with other third parties, and in any cases where this may be required we will explicitly seek your consent to do so.</strong>                                                                                                                                                                   \n </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n <div style=\"font-size:1.1em;font-weight:600;margin-top:14px;margin-bottom:10px;\">What happens if I decline consent?</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \n <div style=\"line-height:1.4em;\">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \n You are free to decline this consent, and we will delete any details that our system currently stores on you.  This will NOT affect your ability to receive parcels.  However we will not be able to send you notifications when they arrive nor ensure that your parcel pickups are recorded by the system.  We will also not be able to send you messages/emails through this system.                                                                                                                                                                                                                    \n </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n <div style=\"font-size:1.1em;font-weight:600;margin-top:14px;margin-bottom:10px;\">How long do we keep your data for?</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \n <div style=\"line-height:1.4em;\">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \n When you are no longer a resident at Global Point we will delete your details from our system. Your details may still remain for a period of time as backups, but these too will be purged as new backups are generated.                                                                                                                                                                                                                                                                                                                                                                                   \n </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n <div style=\"font-size:1.1em;font-weight:600;margin-top:14px;margin-bottom:10px;\">How is the data stored?</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \n <div style=\"line-height:1.4em;\">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \n Your details are stored securely on servers in London.   Data is transmitted to web-browsers over an encrypted (https) connection.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n <div style=\"font-size:1.1em;font-weight:600;margin-top:14px;margin-bottom:10px;\">Your ongoing rights</div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 \n <div style=\"line-height:1.4em;\">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \n You are free to withdraw consent at any time.  To do so, contact any on-site staff and inform them of your decision and we will delete your information from our system.  You also have a right of access:  If you would like to see exactly what data has been recorded on you, please contact any on-site staff and they will be able to request the information on your behalf. You also have a right to rectification: if you believe any of the details we hold on you are incorrect you have the right to have them corrected.                                                                       \n </div>",
                                        "type": "datastoreitem",
                                        "datastore": "deliveries",
                                        "path": "1dd9c8a178fd1"
                                    }
                                }
                            }
                        ]
                    },
                    {
                        "id": "306be7f2b70f9",
                        "type": "node",
                        "parent": "18c521ca016893",
                        "children": [
                            {
                                "id": "19a7854bbf856c",
                                "type": "subtree",
                                "parent": null,
                                "nodeid": "13deb06d11deb3",
                                "children": [],
                                "rules": []
                            }
                        ],
                        "rules": []
                    }
                ],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": [
                {
                    "name": "log endpoint",
                    "type": "log",
                    "url": "https://[buttonkit]/api/v1/datastore/log",
                    "method": "POST",
                    "contentType": "json",
                    "parameters": {
                        "dynamic": {
                            "presser": [
                                {
                                    "id": "cac4267a920ae8_presser",
                                    "type": "presser"
                                }
                            ],
                            "pressed": [
                                {
                                    "id": "cac4267a920ae8_pressed",
                                    "type": "pressed"
                                }
                            ]
                        },
                        "static": {
                            "_datastorename": "collected"
                        }
                    },
                    "webhookId": "cac4267a920ae8"
                },
                {
                    "name": "sheet endpoint",
                    "type": "sheet",
                    "url": "https://[buttonkit]/api/v1/datastore/sheet",
                    "method": "POST",
                    "parameters": {
                        "dynamic": {
                            "sheetparameters": [
                                {
                                    "id": "pressed",
                                    "type": "pressed",
                                    "key": "pressed"
                                },
                                {
                                    "id": "1dd9c8a178fd1",
                                    "type": "user",
                                    "key": "1dd9c8a178fd1"
                                },
                                {
                                    "id": "102ed7e1ce2796",
                                    "type": "options",
                                    "key": "102ed7e1ce2796"
                                },
                                {
                                    "id": "2391a50203f998",
                                    "type": "serverfunction",
                                    "key": "2391a50203f998"
                                },
                                {
                                    "id": "112aa046d29fb2",
                                    "type": "options",
                                    "key": "112aa046d29fb2"
                                },
                                {
                                    "id": "13deb06d11deb3",
                                    "type": "signature",
                                    "key": "13deb06d11deb3"
                                }
                            ]
                        },
                        "static": {
                            "sheetName": ""
                        }
                    },
                    "aliases": {
                        "pressed": "logged",
                        "1dd9c8a178fd1": "recipient",
                        "102ed7e1ce2796": "type",
                        "2391a50203f998": "code",
                        "112aa046d29fb2": "location",
                        "13deb06d11deb3": "signature"
                    },
                    "webhookId": "287660c6b004cc"
                },
                {
                    "name": "delete log item",
                    "type": "deletelogitem",
                    "url": "https://[buttonkit]/api/v1/datastore/delete/question",
                    "method": "POST",
                    "parameters": {
                        "dynamic": {
                            "ids": [
                                "18c521ca016893"
                            ]
                        },
                        "static": {
                            "questionId": "18c521ca016893"
                        }
                    },
                    "webhookId": "12eceb93a83535"
                }
            ]
        },
        {
            "buttonId": "17dd55d0209cac",
            "name": "collected",
            "description": "all collected parcels",
            "type": "action",
            "questions": [
                {
                    "question": "collected parcels",
                    "type": "datastoreitem",
                    "values": {
                        "storeId": "collected",
                        "schema": [
                            {
                                "id": "13ea095573d5f3_pressed",
                                "path": "18c521ca016893,13ea095573d5f3_pressed",
                                "alias": "logged"
                            },
                            {
                                "id": "1dd9c8a178fd1",
                                "path": "18c521ca016893,1dd9c8a178fd1",
                                "alias": "recipient"
                            },
                            {
                                "id": "2391a50203f998",
                                "path": "18c521ca016893,2391a50203f998",
                                "alias": "code"
                            },
                            {
                                "id": "13deb06d11deb3",
                                "path": "13deb06d11deb3",
                                "alias": "signature"
                            }
                        ],
                        "dschema": [
                            {
                                "id": "1dd9c8a178fd1",
                                "path": "18c521ca016893,1dd9c8a178fd1",
                                "alias": "recipient",
                                "default": ""
                            },
                            {
                                "id": "102ed7e1ce2796",
                                "path": "18c521ca016893,102ed7e1ce2796",
                                "alias": "delivery type",
                                "default": ""
                            },
                            {
                                "id": "13deb06d11deb3",
                                "path": "13deb06d11deb3",
                                "alias": "signature",
                                "default": ""
                            }
                        ],
                        "description": "This a full list of all parcels that have been collected."
                    },
                    "validators": [],
                    "compulsory": false,
                    "questionId": "140f74d3f76f06",
                    "number": 1
                }
            ],
            "navigation": {
                "id": "140f74d3f76f06",
                "type": "node",
                "parent": null,
                "children": [],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": []
        },
        {
            "buttonId": "2e4da53e2fce12",
            "name": "my parcels",
            "description": "all my parcels",
            "type": "action",
            "questions": [
                {
                    "question": "my parcels",
                    "type": "datastoreitem",
                    "values": {
                        "storeId": "deliveries",
                        "schema": [
                            {
                                "id": "13ea095573d5f3_pressed",
                                "path": "13ea095573d5f3_pressed",
                                "alias": "received",
                                "default": ""
                            },
                            {
                                "id": "102ed7e1ce2796",
                                "path": "102ed7e1ce2796",
                                "alias": "parcel type",
                                "default": ""
                            },
                            {
                                "id": "2391a50203f998",
                                "path": "2391a50203f998",
                                "alias": "code",
                                "default": ""
                            }
                        ],
                        "filters": [
                            {
                                "type": "user",
                                "id": "1dd9c8a178fd1",
                                "path": "1dd9c8a178fd1"
                            }
                        ],
                        "limit": -1,
                        "orderby": "pressed",
                        "sortby": "asc"
                    },
                    "validators": [],
                    "compulsory": true,
                    "questionId": "14d83a600983ac",
                    "number": 1
                }
            ],
            "navigation": {
                "id": "14d83a600983ac",
                "type": "node",
                "parent": "22a796ac8ced7a",
                "children": [],
                "defaults": {
                    "18c521ca016893": "306be7f2b70f9"
                }
            },
            "webhooks": []
        }
    ]
}